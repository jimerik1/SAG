#!/bin/bash

# Script to remove empty files and unnecessary placeholders

# Function to check if file is empty or just contains whitespace
is_empty_file() {
    if [ ! -s "$1" ]; then
        return 0  # File is empty
    elif ! grep -q '[^[:space:]]' "$1"; then
        return 0  # File contains only whitespace
    else
        return 1  # File has content
    fi
}

# Directory to start search from
ROOT_DIR="./src"

# Find all files that are empty or only contain whitespace
EMPTY_FILES=$(find $ROOT_DIR -type f \( -name "*.py" -o -name "*.cpp" -o -name "*.h" \) -exec bash -c 'is_empty_file "$0" && echo "$0"' {} \;)

# Print the list of empty files
echo "The following files are empty and could be removed:"
echo "$EMPTY_FILES"

# Ask for confirmation before removing
read -p "Do you want to remove these files? (y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "$EMPTY_FILES" | xargs rm
    echo "Files removed successfully."
else
    echo "Operation cancelled."
fi
